<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <title>设备信息</title>
    <link rel="stylesheet" type="text/css" href="../../js/themes/default/xui.css">
    <link rel="stylesheet" type="text/css" href="../../js/themes/icon.css">
    <link rel="stylesheet" type="text/css" href="../../css/tool.css">
    <script type="text/javascript" src="../../js/jquery.min.js"></script>
    <script type="text/javascript" src="../../js/jquery.xui.min.js"></script>
    <script type="text/javascript" src="../../js/My97DatePicker/WdatePicker.js"></script>
    <link href="../../js/My97DatePicker/skin/WdatePicker.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="../../js/jquery.xconfig.js"></script>
    <script type="text/javascript" src="../../js/jquery.tool.js"></script>
</head>

<body class="search-body" style="padding:5px;">
    <div class="search-div">
        <div>
            <form id="search-fm" class="form search-form" action="/action/ms/device-info/search" method="post" data-options="onSerialize:serializeSearchForm">
                <table class="table" style="width:950px;">
                    <caption>
                        查询设备信息
                    </caption>
                    <tbody>
                        <tr>
                            <td class="right td20">
                                <label>设备编号：</label>
                            </td>
                            <td class="td30">
                                <input type="text" name="device_no" style="text-transform:uppercase;">
                            </td>
                            <td class="right td20">
                                <label>设备型号：</label>
                            </td>
                            <td class="td30">
                                <input type="text" name="device_type">
                            </td>
                        </tr>
                        <tr>
                            <td class="right td20">
                                <label>仓库：</label>
                            </td>
                            <td class="td30"><span class="xui-combobox combobox" id="depot_id" data-options="required:true,valueField:'depot_id',textField:'depot_name'"><input type="text" class="combobox-text"><input type="hidden" name="depot_id" class="combobox-value"><span class="combobox-addon"><i class="combobox-icon combobox-arrow"></i></span></span>
                            </td>
                            <td class="right td20">
                                <label>终端标识码：</label>
                            </td>
                            <td class="td30">
                                <input type="text" name="term_no">
                            </td>
                        </tr>
                        <tr>
                            <td class="right td20">
                                <label>创建日期：</label>
                            </td>
                            <td class="td30">
                                <input id="created_time" type="text" class="Wdate" name="created_time" style="width:100px;" onfocus="WdatePicker({onpicked:function(){$dp.$('created_time2').focus();},maxDate:'#F{$dp.$D(\'created_time2\')}'})">
                                <input id="created_time2" type="text" class="Wdate" name="created_time2" style="width:100px;" onfocus="WdatePicker({minDate:'#F{$dp.$D(\'created_time\')}'})">
                            </td>
                            <td class="right td20">
                                <label>记录处理状态：</label>
                            </td>
                            <td class="td30"><span class="xui-combobox combobox" data-options="data:xConfig['proc_st']['F'],panelHeight:'auto',editable:false"><input type="text" class="combobox-text" style="width: 75px;"><input type="hidden" name="proc_st" class="combobox-value"><span class="combobox-addon"><i class="combobox-icon combobox-arrow"></i></span></span>
                            </td>
                        </tr>
                        <tr>
                            <td class="right td20">
                                <label>终端投资方：</label>
                            </td>
                            <td class="td30">
                                <span class="xui-combobox combobox" id="term_inves" data-options=""><input type="text" class="combobox-text"><input type="hidden" name="term_inves" class="combobox-value"><span class="combobox-addon"><i class="combobox-icon combobox-arrow"></i></span></span>
                            </td>
                            <td class="right td20">
                            </td>
                            <td class="td30">
                            </td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="4" class="center">
                                <div style="margin:5px;"></div>
                                <a href="javascript:void(0)" class="xui-linkbutton l-btn" data-options="iconCls:'icon-search',datagrid:'#search-dg'" style="padding:0 5px;" onclick="xTool.search(this)"><span class="l-btn-left l-btn-icon-left"><span class="l-btn-text">查询</span><span class="l-btn-icon icon-search">&nbsp;</span></span></a> &nbsp;&nbsp;
                                <a href="javascript:void(0)" class="xui-linkbutton l-btn" data-options="iconCls:'icon-clear',datagrid:'#search-dg'" style="padding:0 5px;" onclick="xTool.reset(this)"><span class="l-btn-left l-btn-icon-left"><span class="l-btn-text">重置</span><span class="l-btn-icon icon-clear">&nbsp;</span></span></a> &nbsp;&nbsp;
                                <a href="javascript:void(0)" class="xui-linkbutton l-btn" data-options="iconCls:'icon-export',url:'/action/ms/device-info/export'" style="padding:0 5px;" onclick="xTool.exportData(this)"><span class="l-btn-left l-btn-icon-left"><span class="l-btn-text">导出</span><span class="l-btn-icon icon-export">&nbsp;</span></span></a>
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </form>
        </div>
        <br>
        <div class="xui-datagrid datagrid" style="min-width: 800px;" id="search-dg" data-options="[myGridDefaults, {idField:'rec_id',transition:myDefaultTransition}]">
            <div class="datagrid-header">设备信息列表</div>
            <div class="datagrid-body">
                <div class="datagrid-toolbar"><a href="javascript:void(0)" class="action xui-linkbutton l-btn l-btn-plain" style="display:none;" onclick="xTool.view(this)" data-options="disabled:true,plain:true,iconCls:'icon-view',datagrid:'#search-dg',form:'#detail-fm',url:'/action/ms/device-info/view'"><span class="l-btn-left l-btn-icon-left"><span class="l-btn-text">查看详情</span><span class="l-btn-icon icon-view">&nbsp;</span></span></a></div>
                <div class="datagrid-view">
                    <table class="datagrid-table" border="0" cellspacing="0" cellpadding="0">
                        <thead>
                            <tr class="datagrid-header-row">
                                <th class="datagrid-header-rownumber" data-options="field:'rn',rownumber:true"></th>
                                <th data-options="field:'device_no',width:120">设备编号</th>
                                <th data-options="field:'device_type',width:80">设备型号</th>
                                <th data-options="field:'depot_name',width:80">仓库</th>
                                <th data-options="field:'term_inves',width:100,formatter:formatTermInves">终端投资方</th>
                                <th data-options="field:'term_no',width:80">终端标识码</th>
                                <th data-options="field:'mcht_name',width:100">商户名称</th>
                                <th data-options="field:'purchase_date',width:100">采购日期</th>
                                <th data-options="field:'last_modified_time',width:120">最后修改时间</th>
                                <th data-options="field:'oper_in',width:80,formatter:formatOperIn">操作标志</th>
                                <th data-options="field:'proc_st',width:90,formatter:formatProcSt">记录处理状态</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="datagrid-pager"></div>
            </div>
        </div>
    </div>
    <div class="detail-div" style="display: none;">
        <form id="detail-fm" class="form view" action="/action/ms/device-info/view" method="post" style="width:950px;">
            <div style="padding:5px;">
                <table class="table" style="width:100%;">
                    <caption>
                        设备信息
                    </caption>
                    <tbody>
                        <tr>
                            <td class="right td20">
                                <label>设备编号：</label>
                            </td>
                            <td class="td30">
                                <input type="text" name="device_no" class="xui-validatebox" data-options="required:true">
                                <label class="required">*</label>
                            </td>
                            <td class="right td20">
                                <label>设备型号：</label>
                            </td>
                            <td class="td30">
                                <input type="text" name="device_type" class="xui-validatebox" data-options="required:true">
                                <label class="required">*</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="right td20">
                                <label>终端投资方：</label>
                            </td>
                            <td class="td30"><span class="xui-combobox combobox" data-options="required:true,data:xConfig['term_inves']"><input type="text" class="combobox-text"><input type="hidden" name="term_inves" class="combobox-value"><span class="combobox-addon"><i class="combobox-icon combobox-arrow"></i></span></span>
                                <label class="required">*</label>
                            </td>
                            <td class="right td20">
                                <label>仓库：</label>
                            </td>
                            <td class="td30"><span class="xui-combobox combobox" id="depot_id2" data-options="required:true,valueField:'depot_id',textField:'depot_name'"><input type="text" class="combobox-text"><input type="hidden" name="depot_id" class="combobox-value"><span class="combobox-addon"><i class="combobox-icon combobox-arrow"></i></span></span>
                                <label class="required">*</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="right td20">
                                <label>采购日期：</label>
                            </td>
                            <td class="td30">
                                <input type="text" name="purchase_date" class="Wdate xui-validatebox" data-options="" onfocus="WdatePicker()">
                            </td>
                            <td class="right td20">
                                <label>生产日期：</label>
                            </td>
                            <td class="td30">
                                <input type="text" name="production_date" class="Wdate xui-validatebox" data-options="" onfocus="WdatePicker()">
                            </td>
                        </tr>
                        <tr>
                            <td class="right td20">
                                <label>保修日期：</label>
                            </td>
                            <td class="td30">
                                <input type="text" name="warranty_date" class="Wdate xui-validatebox" data-options="" onfocus="WdatePicker()">
                            </td>
                            <td class="right td20">
                                <label>操作单号：</label>
                            </td>
                            <td class="td30">
                                <input type="text" name="depot_oper_no" class="xui-validatebox" data-options="required:true">
                                <label class="required">*</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="right td20">
                                <label>终端标识：</label>
                            </td>
                            <td class="td30">
                                <input type="text" name="term_no" class="xui-validatebox" data-options="">
                            </td>
                            <td class="right td20">
                                <label>注释：</label>
                            </td>
                            <td class="td30">
                                <input type="text" name="note" class="xui-validatebox" data-options="">
                            </td>
                        </tr>
                        <tr>
                            <td class="right td20">
                                <label>记录编号：</label>
                            </td>
                            <td class="td30">
                                <input type="text" name="rec_id" class="add edit">
                            </td>
                            <td class="right td20">
                                <label>记录操作标志：</label>
                            </td>
                            <td class="td30">
                                <input type="text" name="oper_in" class="add edit">
                            </td>
                        </tr>
                        <tr>
                            <td class="right td20">
                                <label>记录处理状态：</label>
                            </td>
                            <td class="td30">
                                <input type="text" name="proc_st" class="add edit">
                            </td>
                            <td class="right td20">
                                <label>创建人：</label>
                            </td>
                            <td class="td30">
                                <input type="text" name="created_by" class="add edit">
                            </td>
                        </tr>
                        <tr>
                            <td class="right td20">
                                <label>创建时间：</label>
                            </td>
                            <td class="td30">
                                <input type="text" name="created_time" class="add edit">
                            </td>
                            <td class="right td20">
                                <label>最后修改人：</label>
                            </td>
                            <td class="td30">
                                <input type="text" name="last_modified_by" class="add edit">
                            </td>
                        </tr>
                        <tr>
                            <td class="right td20">
                                <label>最后修改时间：</label>
                            </td>
                            <td class="td30">
                                <input type="text" name="last_modified_time" class="add edit">
                            </td>
                            <td class="right td20">&nbsp;</td>
                            <td class="td30">&nbsp;</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div style="text-align:center;">
                <div style="margin:5px;"></div>
                <a href="javascript:void(0)" class="xui-linkbutton l-btn" data-options="iconCls:'icon-return'" style="padding:0 5px;" onclick="xTool.returnSearch(this)"><span class="l-btn-left l-btn-icon-left"><span class="l-btn-text">返回</span><span class="l-btn-icon icon-return">&nbsp;</span></span></a> </div>
        </form>
    </div>
    <script>
    var myDefaultTransition = xConfig['status_transition']['F'];

    function formatTermInves(value, rowData, rowIndex) {
        return xTool.formatField(xConfig['term_inves'], value);
    }

    function formatOperIn(value, rowData, rowIndex) {
        return xTool.formatField(xConfig['oper_in']['F'], value);
    }

    function formatProcSt(value, rowData, rowIndex) {
        return xTool.formatField(xConfig['proc_st']['F'], value);
    }

    function serializeSearchForm(data) {
        data.device_no = data.device_no.toUpperCase();
    }

    function initCombobox() {
        xTool.send('/action/ms/parameter/list', {
            depot_id: '1',
            term_inves: '1'
        }, function(data) {
            if (data.code == 0) {
                $('#depot_id').combobox('loadData', data.depot_id);
                $('#depot_id2').combobox('loadData', data.depot_id);
                $('#term_inves').combobox('loadData', data.term_inves);
                xConfig['term_inves'] = data.term_inves;
            }
        });
    }

    $(function() {
        initCombobox();
    });
    </script>
</body>

</html>