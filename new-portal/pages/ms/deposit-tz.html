<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="renderer" content="webkit">
<title>押金台账</title>
<link rel="stylesheet" type="text/css" href="../../js/themes/default/xui.css">
<link rel="stylesheet" type="text/css" href="../../js/themes/icon.css">
<link rel="stylesheet" type="text/css" href="../../css/tool.css">
<script type="text/javascript" src="../../js/jquery.min.js"></script>
<script type="text/javascript" src="../../js/jquery.xui.min.js"></script>
<script type="text/javascript" src="../../js/My97DatePicker/WdatePicker.js"></script>
<link href="../../js/My97DatePicker/skin/WdatePicker.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="../../js/jquery.xconfig.js"></script>
<script type="text/javascript" src="../../js/jquery.xdistrict.js"></script>
<script type="text/javascript" src="../../js/jquery.tool.js"></script>
</head>

<body>
<div>
  <div>
    <form id="search-fm" class="form search-form" action="/action/ms/deposit-tz/search" method="post">
      <table class="table" style="width:950px;">
        <caption>
        查询押金台账
        </caption>
        <tbody>
          <tr>
            <td class="right td20"><label>押金条号：</label></td>
            <td class="td30"><input type="text" name="deposit_no"></td>
            <td class="right td20"><label>押金领用人：</label></td>
            <td class="td30"><span class="xui-combobox combobox" id="recipients_id" data-options="required:true,validType:['combobox']">
              <input type="text" class="combobox-text">
              <input type="hidden" name="recipients_id" class="combobox-value">
              <span class="combobox-addon"><i class="combobox-icon combobox-arrow"></i></span></span></td>
          </tr>
          <tr>
            <td class="right td20"><label>商户号：</label></td>
            <td class="td30"><input type="text" name="mchnt_cd"></td>
            <td class="right td20"><label>终端号：</label></td>
            <td class="td30"><input type="text" name="term_id"></td>
          </tr>
          <tr>
            <td class="right td20"><label>收款日期：</label></td>
            <td class="td30"><input id="receivables_dt" type="text" class="Wdate" name="receivables_dt" style="width:100px;" onfocus="WdatePicker({onpicked:function(){$dp.$('receivables_dt2').focus();},maxDate:'#F{$dp.$D(\'receivables_dt2\')}'})">
              <input id="receivables_dt2" type="text" class="Wdate" name="receivables_dt2" style="width:100px;" onfocus="WdatePicker({minDate:'#F{$dp.$D(\'receivables_dt\')}'})"></td>
            <td class="right td20"><label>收款经手人：</label></td>
            <td class="td30"><input type="text" name="receivables_dw_id"></td>
          </tr>
          <tr>
            <td class="right td20"><label>终端标识码：</label></td>
            <td class="td30"><input type="text" name="term_no"></td>
            <td class="right td20"><label>退款日期 ：</label></td>
            <td class="td30"><input id="refund_dt" type="text" class="Wdate" name="refund_dt" style="width:100px;" onfocus="WdatePicker({onpicked:function(){$dp.$('refund_dt2').focus();},maxDate:'#F{$dp.$D(\'refund_dt2\')}'})">
              <input id="refund_dt2" type="text" class="Wdate" name="refund_dt2" style="width:100px;" onfocus="WdatePicker({minDate:'#F{$dp.$D(\'refund_dt\')}'})"></td>
          </tr>
          <tr>
            <td class="right td20"><label>生成日期：</label></td>
            <td class="td30"><input id="created_time" type="text" class="Wdate" name="created_time" style="width:100px;" onfocus="WdatePicker({onpicked:function(){$dp.$('created_time2').focus();},maxDate:'#F{$dp.$D(\'created_time2\')}'})">
              <input id="created_time2" type="text" class="Wdate" name="created_time2" style="width:100px;" onfocus="WdatePicker({minDate:'#F{$dp.$D(\'created_time\')}'})"></td>
            <td class="right td20"><label>记录处理状态：</label></td>
            <td class="td30"><span class="xui-combobox combobox" data-options="data:xConfig['proc_st']['G'],panelHeight:'auto',editable:false">
              <input type="text" class="combobox-text" style="width: 75px;">
              <input type="hidden" name="proc_st" class="combobox-value">
              <span class="combobox-addon"><i class="combobox-icon combobox-arrow"></i></span></span></td>
          </tr>
          <tr>
            <td class="right td20"><label>所在地区：</label></td>
            <td class="td30 clear-readonly"><span>
              <input type="text" id="province" name="province" class="easyui-combobox" data-options="editable:false,required:true,data:provinceData,onChange:onChangeProvince" style="width:80px;">
              <input type="text" id="city" name="city" class="easyui-combobox" data-options="editable:false,required:true,data:cityData,onChange:onChangeCity" style="width:80px;">
              <input type="text" id="district" name="district" class="easyui-combobox" data-options="editable:false,required:true" style="width:80px;">
              <label class="required">*</label>
              </span></td>
            <td class="right td20"></td>
            <td class="td30"></td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="4" class="center"><div style="margin:5px;"></div>
              <a href="javascript:void(0)" class="xui-linkbutton l-btn" data-options="iconCls:'icon-search',datagrid:'#search-dg'" style="padding:0 5px;" onclick="xTool.search(this)"><span class="l-btn-left l-btn-icon-left"><span class="l-btn-text">查询</span><span class="l-btn-icon icon-search">&nbsp;</span></span></a> &nbsp;&nbsp; <a href="javascript:void(0)" class="xui-linkbutton l-btn" data-options="iconCls:'icon-clear',datagrid:'#search-dg'" style="padding:0 5px;" onclick="xTool.reset(this)"><span class="l-btn-left l-btn-icon-left"><span class="l-btn-text">重置</span><span class="l-btn-icon icon-clear">&nbsp;</span></span></a> &nbsp;&nbsp; <a href="javascript:void(0)" class="xui-linkbutton l-btn" data-options="iconCls:'icon-export',url:'/action/ms/deposit-tz/export'" style="padding:0 5px;" onclick="xTool.exportData(this)"><span class="l-btn-left l-btn-icon-left"><span class="l-btn-text">导出</span><span class="l-btn-icon icon-export">&nbsp;</span></span></a></td>
          </tr>
        </tfoot>
      </table>
    </form>
  </div>
  <br>
  <div class="xui-datagrid datagrid" style="min-width: 800px;" id="search-dg" data-options="pagination:true">
    <div class="datagrid-header">押金台账</div>
    <div class="datagrid-body">
      <div class="datagrid-view">
        <table class="datagrid-table" border="0" cellspacing="0" cellpadding="0">
          <thead>
            <tr class="datagrid-header-row">
              <th class="datagrid-header-rownumber" data-options="field:'rn',rownumber:true"></th>
              <th data-options="field:'district_name'">城市</th>
              <th data-options="field:'term_no'">业务终端号</th>
              <th data-options="field:'mchnt_cd'">商户编号</th>
              <th data-options="field:'mcht_name'">商户名称</th>
              <th data-options="field:'e_name'">客户经理</th>
              <th data-options="field:'term_id'">商户终端号</th>
              <th data-options="field:'device_no'">机具序列号</th>
              <th data-options="field:'operate_name'">类型</th>
              <th data-options="field:'receivables_dt'">收款日期</th>
              <th data-options="field:'deposit_amount'">收取金额</th>
              <th data-options="field:'refund_amount'">撤机金额</th>
              <th data-options="field:'recipients_name'">经手人</th>
              <th data-options="field:'deposit_no'">收据号</th>
              <th data-options="field:'created_time'">收据生成日期</th>
                <th data-options="field:'print_date'">收据打印日期</th>
              <th data-options="field:'note'">备注</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
      <div class="datagrid-pager"></div>
    </div>
  </div>
</div>
<script>
    	var provinceData = xProvinceCityDistrict['province'];
        var cityData = xProvinceCityDistrict['city']['43'];
        
    	function onChangeProvince(newValue, oldValue) {
            if (newValue) {
                $('#city').combobox('clear').combobox('loadData', xProvinceCityDistrict['city'][newValue]);
                $('#district').combobox('clear');
            }
        }
        
        function onChangeCity(newValue, oldValue) {
            if (newValue) {
                var province = $('#province').combobox('getValue');
                $('#district').combobox('clear').combobox('loadData', xProvinceCityDistrict['district'][province + newValue]);
            }
        }
    </script>
</body>
</html>