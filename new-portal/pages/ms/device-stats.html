<!doctype html>
<html><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="renderer" content="webkit">
    <title>仓库库存</title>
    <link rel="stylesheet" type="text/css" href="../../js/themes/default/xui.css">
    <link rel="stylesheet" type="text/css" href="../../js/themes/icon.css">
    <link rel="stylesheet" type="text/css" href="../../css/tool.css">
    <script type="text/javascript" src="../../js/jquery.min.js"></script>
    <script type="text/javascript" src="../../js/jquery.xui.min.js"></script>
    <script type="text/javascript" src="../../js/jquery.xconfig.js"></script>
    <script type="text/javascript" src="../../js/jquery.tool.js"></script>
</head>

<body class="search-body">
	<div class="search-div">
    <div>
        <form id="search-fm" class="form search-form" action="/action/ms/device-info/search-stats" method="post">
            <table class="table" style="width:950px;">
              <tbody><tr>
                <td class="right td20"><label>仓库：</label></td>
                <td class="td30"><span class="xui-combobox combobox" data-options="valueField:'depot_id',textField:'depot_name',url:'/action/ms/depot-info/list'"><input type="text" class="combobox-text"><input type="hidden" name="depot_id" class="combobox-value"><span class="combobox-addon"><i class="combobox-icon combobox-arrow"></i></span></span></td>
                <td class="right td20"><label>生产厂家：</label></td>
                <td class="td30"><span class="xui-combobox combobox" data-options="data:xConfig['manufacturer'],onChange:onChangeManufacturer"><input type="text" class="combobox-text"><input type="hidden" name="manufacturer" class="combobox-value"><span class="combobox-addon"><i class="combobox-icon combobox-arrow"></i></span></span></td>
              </tr>
              <tr>
                <td class="right td20"><label>设备型号：</label></td>
                <td class="td30"><span class="xui-combobox combobox" id="device_type" data-options="valueField:'device_type',textField:'device_name',url:'/action/ms/device-type/list',onBeforeLoad:onBeforeLoadDeviceType"><input type="text" class="combobox-text"><input type="hidden" name="device_type" class="combobox-value"><span class="combobox-addon"><i class="combobox-icon combobox-arrow"></i></span></span></td>
                <td class="right td20">&nbsp;</td>
                <td class="td30">&nbsp;</td>
              </tr>
                </tbody><caption>查询仓库库存</caption>
                <tfoot>
                    <tr>
                        <td colspan="4" class="center">
                            <div style="margin:5px;"></div>
                            <a href="javascript:void(0)" class="xui-linkbutton l-btn" data-options="iconCls:'icon-search',datagrid:'#search-dg'" style="padding:0 5px;" onclick="xTool.search(this)"><span class="l-btn-left l-btn-icon-left"><span class="l-btn-text">查询</span><span class="l-btn-icon icon-search">&nbsp;</span></span></a>
                            &nbsp;&nbsp;
                            <a href="javascript:void(0)" class="xui-linkbutton l-btn" data-options="iconCls:'icon-clear',datagrid:'#search-dg'" style="padding:0 5px;" onclick="xTool.reset(this)"><span class="l-btn-left l-btn-icon-left"><span class="l-btn-text">重置</span><span class="l-btn-icon icon-clear">&nbsp;</span></span></a>
                        </td>
                    </tr>
                </tfoot>
            </table>
        </form>
    </div>
    <br>
    <div class="xui-datagrid datagrid" style="min-width: 800px;" id="search-dg" data-options="pagination:true"><div class="datagrid-header">仓库库存</div><div class="datagrid-body"><div class="datagrid-view"><table class="datagrid-table" border="0" cellspacing="0" cellpadding="0"><thead><tr class="datagrid-header-row"><th class="datagrid-header-rownumber" data-options="field:'rn',rownumber:true"></th><th data-options="field:'depot_name',width:120">仓库名称</th><th data-options="field:'device_type',width:120">设备型号</th><th data-options="field:'device_name',width:120">设备名称&nbsp;</th><th data-options="field:'manufacturer',width:120">生产厂家</th><th data-options="field:'device_flag',width:120,formatter:formatDeviceFlag">设备类型</th><th data-options="field:'device_count',width:120">当前库存数</th></tr></thead><tbody></tbody></table></div><div class="datagrid-pager"></div></div></div>
    </div>
    <script>
    	function onChangeManufacturer() {
        	$('#device_type').combobox('clear').combobox('reload');
        }
        
        function onBeforeLoadDeviceType(param) {
        	var data = $('#search-fm').serializeObject();
        	param.manufacturer = data.manufacturer;
        }
        
        function formatDeviceFlag(value, rowData, rowIndex) {
	        return xTool.formatField(xConfig['device_flag'], value);
	    }
    </script>


</body></html>